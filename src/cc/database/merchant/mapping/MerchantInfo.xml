<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cc.database.merchant.mapping.merchantInfo">
    <select id="getMerchantInfoById" parameterType="long" resultMap="merchantInfoResult">
        SELECT * FROM merchantinfo where id=#{id}
    </select>

    <select id="insertmerchantinfo" parameterType="java.util.HashMap" resultType="java.util.HashMap">
        insert into  merchantinfo  ( openid,cardid) values (#{openid} ,#{cid})
    </select>

    <select id="insertmerchant" parameterType="java.util.HashMap" >
        insert into  merchantinfo (store,address,contact,tel,idcardno,city,bank,contactnum,acountcode,acountname,province,wxpay,jdpay,alipay,bestpay,canpay)
        select store,address,contact,tel,idcardno,city,bank,contactnum,acountcode,acountname,province,
        #{wxpay},#{jdpay},#{alipay},#{bestpay},#{canpay}
        from pendingmerchant where cardid=#{cid} and openid = #{openid}
    </select>

    <select id="updmerchantinfo" parameterType="java.util.HashMap" >
        update merchantinfo <set>
        <if test="store!=null">   store=#{store} ,</if>
        <if test="address!=null">   address=#{address} ,</if>
        <if test="contact!=null">   contact=#{contact} ,</if>
        <if test="tel!=null">   tel=#{tel} ,</if>
        <if test="idcardno!=null">   idcardno=#{idcardno} ,</if>
        <if test="picidcardz!=null">   picidcardz=#{picidcardz} ,</if>
        <if test="picidcardf!=null">   picidcardf=#{picidcardf} ,</if>
        <if test="pichandidcard!=null">   pichandidcard=#{pichandidcard} ,</if>
        <if test="regdate!=null">   regdate=#{regdate} ,</if>
        <if test="canpay!=null">   canpay=#{canpay} ,</if>
        <if test="wxpay!=null">   wxpay=#{wxpay} ,</if>
        <if test="alipay!=null">   alipay=#{alipay} ,</if>
        <if test="jdpay!=null">   jdpay=#{jdpay} ,</if>
        <if test="bestpay!=null">   bestpay=#{bestpay} ,</if>
        <if test="wxrate!=null">   wxrate=#{wxrate} ,</if>
        <if test="alirate!=null">   alirate=#{alirate} ,</if>
        <if test="jdrarte!=null">   jdrarte=#{jdrarte} ,</if>
        <if test="bestrate!=null">   bestrate=#{bestrate} ,</if>
        <if test="city!=null">   city=#{city} ,</if>
        <if test="bank!=null">   bank=#{bank} ,</if>
        <if test="contactnum!=null">   contactnum=#{contactnum} ,</if>
        <if test="acountcode!=null">   acountcode=#{acountcode} ,</if>
        <if test="acountname!=null">   acountname=#{acountname} ,</if>
    </set>
        where openid=#{openid} and cardid=#{cid}
    </select>

    <resultMap type="cc.database.merchant.MerchantInfo" id="merchantInfoResult">
        <id property="id" column="id" jdbcType="BIGINT" />
        <result property="name" column="name" jdbcType="VARCHAR" />
        <result property="address" column="address" jdbcType="VARCHAR" />
        <result property="contactPhone" column="contactPhone" jdbcType="VARCHAR" />
        <result property="idCard" column="idCard" jdbcType="VARCHAR" />
        <result property="idCardPF" column="idCardPF" jdbcType="VARCHAR" />
        <result property="idCardPB" column="idCardPB" jdbcType="VARCHAR" />
        <result property="idCardPC" column="idCardPC" jdbcType="VARCHAR" />
        <result property="registerDate" column="registerDate" jdbcType="TIMESTAMP" />
        <result property="paymentStatus" column="paymentStatus" jdbcType="TINYINT" />
        <result property="wxStatus" column="wxStatus" jdbcType="TINYINT" />
        <result property="wxRate" column="wxRate" jdbcType="FLOAT" />
        <result property="aliStatus" column="aliStatus" jdbcType="TINYINT" />
        <result property="aliRate" column="aliRate" jdbcType="FLOAT" />
        <result property="jdStatus" column="jdStatus" jdbcType="TINYINT" />
        <result property="jdRate" column="jdRate" jdbcType="FLOAT" />
        <result property="bestStatus" column="bestStatus" jdbcType="TINYINT" />
        <result property="bestRate" column="bestRate" jdbcType="FLOAT" />
        <result property="bankCity" column="bankCity" jdbcType="VARCHAR" />
        <result property="bankName" column="bankName" jdbcType="VARCHAR" />
        <result property="bankCode" column="bankCode" jdbcType="VARCHAR" />
        <result property="accountCode" column="accountCode" jdbcType="VARCHAR" />
        <result property="accountName" column="accountName" jdbcType="VARCHAR" />
        <result property="accountPhone" column="accountPhone" jdbcType="VARCHAR" />
    </resultMap>
</mapper>